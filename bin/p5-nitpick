#!/usr/bin/env perl
use strict;
use warnings;

use Getopt::Long qw(GetOptions);

use App::P5Nitpick;
use App::P5Nitpick::Nitpicker;

unshift @ARGV, split ' ', $ENV{PERL_NITPICK_OPTS};

my %args;
GetOptions(
    \%args,
    "l|list",
    "r|rules=s",
);



if ($args{l}) {
    die "...\n";
} elsif ($args{r}) {
    my @rules = split /\s*,\s*/, $args{r};
    for my $file (@ARGV) {
        my $x = App::P5Nitpick::Nitpicker->new( file => $file, rules => \@rules );
        $x->rewrite;
    }
}
